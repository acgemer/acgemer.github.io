<!doctype html>
<html>
<head>
	
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<link rel="stylesheet" type="text/css" href="js/fancybox/jquery.fancybox.css" />
<link rel="stylesheet" type="text/css" href="themes/lovechina/assets/css/style.css" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800italic,800&amp;subset=latin,cyrillic" />
<link rel="stylesheet" type="text/css" href="themes/lovechina/assets/css/slick.css" />
<link rel="stylesheet" type="text/css" href="themes/lovechina/assets/css/search_stylesheet.css" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<title>калькулятор - lovchina.ru</title>
	
		
</head>

<body>
<div class="wraper">
	<div class="top">
    	<div>
        	<p>поддержка:<span>8 913 004 31 31</span><a href="contacts.html">контакты</a></p>
        </div>
    </div>
	<div class="header">
    	<div class="clear">
        	<a href="index.html" class="logo">
            	<h1>lovchina.ru</h1>
                <span>Доставка товаров из Китая</span>
            </a>
            <button class="pull pull1"></button>
        	<div class="search_wrap">
	        	<div id="taojet_search"></div>
        		            </div>
            <div class="links_wrap">
            	<button class="pull"></button>

            	<div class="links">
										<a href="user/registration.html" class="registration"><span>Регистрация</span></a>
					<a href="user/login.html" class="enter"><span>Вход</span></a>
					                    
                </div>
            </div>
            <a href="user/login.html" class="cart"></a>
        </div>
    </div>
    
	    <div class="nav">
    	<div>
        	<button class="pull pull2">Меню</button>

				<ul class="menu" id="yw0">
<li class="home "><a href="index.html">главная</a></li>
<li><a href="category.html">каталог</a></li>
<li><a href="warranty-and-service.html">Гарантии</a></li>
<li><a href="opt.html">Оптовикам</a></li>
<li><a href="operating-procedure.html">Как сделать заказ</a></li>
<li class="active_menu"><a href="calculator.html">калькулятор</a></li>
<li><a href="pravila.html">Правила</a></li>
</ul>        </div>
    </div>
		
    <div class="benefits">
    	<div>
        	<span class="benefit benefit1">быстрая доставка</span>
        	<span class="benefit benefit2">Полная финансовая ответственность</span>
            <span class="benefit benefit3">Индивидуальный подход</span>
        </div>
    </div>
    
    
    
    <div class="content">
    	<div>
    		        	<div class="calculator_page">
        	
				<h2>Калькулятор расчёта</h2>
					
					
				<form method="POST" action="http://lovchina.ru/site/calculator" method="post" id="form_calculator1" class="validate" novalidate="novalidate" onsubmit="return false;">

                <div class="calculator">
                	<div class="row">
                    	<div class="cell_name">
                        	<p>Стоимость товара</p>
                        </div>
                        <div class="cell_input">
                        	<input type="text" name="cost" placeholder="0" class="required" required="required" />
                        </div>
                        <div class="cell_after">
                        	<p>юаней</p>
                        </div>
                        <div class="cell_comment">
                        </div>
                    </div>
                    <div class="row">
                    	<div class="cell_name">
                        	<p>Количество товара</p>
                        </div>
                        <div class="cell_input">
                        	<input type="text" name="amount" placeholder="0" class="required" required="required" />
                        </div>
                        <div class="cell_after">
                        	<p>штук</p>
                        </div>
                        <div class="cell_comment">
                        </div>
                    </div>
                    <div class="row">
                    	<div class="cell_name">
                        	<p>Стоимость доставки по Китаю</p>
                        </div>
                        <div class="cell_input">
                        	<input type="text" name="delivery_ch" placeholder="0" class="required" required="required" />
                        </div>
                        <div class="cell_after">
                        	<p>юаней</p>
                        </div>
                        <div class="cell_comment">
                        </div>
                    </div>
                    <div class="row">
                    	<div class="cell_name">
                        	<p>Примерный вес товара</p>
                        </div>
                        <div class="cell_input">
                        	<input type="text" name="weight" placeholder="0" class="required" required="required" />
                        </div>
                        <div class="cell_after">
                        	<p>кг</p>
                        </div>
                        <div class="cell_comment">
                        </div>
                    </div>
                    <div class="row">
                    	<div class="cell_name">
                        	<p>Курс Юаня</p>
                        </div>
                        <div class="cell_input">
                        	<input type="text" name="currency_rate" placeholder="9.60" class="required" required="required" value="9.60" />
                        </div>
                        <div class="cell_after">
                        	<p>руб.</p>
                        </div>
                        <div class="cell_comment">
                        	<span>(текущий курс 9.60 руб.)</span>
                        </div>
                    </div>
                    <div class="row">
                    	<div class="cell_name">
                        	<p>Доставка в России</p>
                        </div>
                        <div class="cell_input">
                        	<input type="text" name="delivery_rus" placeholder="270.00" class="required" required="required" value="270.00" />
                        </div>
                        <div class="cell_after">
                        	<p>(руб/кг)</p>
                        </div>
                        <div class="cell_comment">
                        	<span>(стандартная доставка 270.00 руб/кг)</span>
                        </div>
                    </div>
                    <div class="row">
                    	<div class="cell_name">
                        	<p>Комиссия за наши услуги</p>
                        </div>
                        <div class="cell_input">
                        	<input type="text" name="commission" placeholder="8.00" class="required" required="required" value="8.00" />
                        </div>
                        <div class="cell_after">
                        	<p>%</p>
                        </div>
                        <div class="cell_comment">
                        	<span>(стандартная комиссия 8.00%)</span>
                        </div>
                    </div>
                    <div class="row">
                    	<div class="cell_name">
                        </div>
                        <div class="cell_input">
                        	<input type="button" value="Рассчитать" class="calculation">
                    		<!-- <input type="submit" name="submit_button" value="Отправить"  class="send" /> -->
                        </div>
                        <div class="cell_after">
                        </div>
                        <div class="cell_comment">
                        </div>
                    </div>
                </div>
                
                <div class="result">
                
                	<div style="display:none;" id="info1" class="subbutton-mess"></div>
					<div style="display:none;" id="error1" class="subbutton-mess-error"></div>
	
                	<p class="cost-china"><span class="name">Стоимость товара в Китае:</span><span class="price_result"><span class="bold_span">0.00</span> руб.</span></p>
                    <p class="cost-delivery-to-russian"><span class="name">Стоимость доставки в Россию:</span><span class="price_result"><span class="bold_span">0.00</span> руб.</span></p>
                    <p class="cost-total"><span class="name bold_span">Итог общий:</span><span class="price_result"><span class="bold_span">0.00</span> руб.</span></p>
                </div>
                
	
	<input type="hidden" name="guid" value="eaa073532fa884b66093ea6e9ad3b16e">
	<input type="hidden" name="redirect" value="%2Fcalculator">
	
</form>
<script>
/**
 *
 * @param {type} c
 * @param {type} d
 * @param {type} t
 * @returns {String}
 */
Number.prototype.formatMoney = function (c, d, t) {
    var n = this,
        c = isNaN(c = Math.abs(c)) ? 2 : c,
        d = ( typeof(d) === 'undefined' ) ? "." : d,
        t = ( typeof(t) === 'undefined' ) ? "," : t,
        s = n < 0 ? "-" : "",
        i = parseInt(n = Math.abs(+n || 0).toFixed(c)) + "",
        j = (j = i.length) > 3 ? j % 3 : 0;
    return s + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "");
};

$(document).ready(function() {
	
	var $form = $('#form_calculator1');
	var $message = $('#info1');
	var $error = $('#errors1');
	
		var $calcButton = $form.find('.calculation');
		
		var $resChina = $form.find('.cost-china');
		var $resDeliveryToRus = $form.find('.cost-delivery-to-russian');
		var $resTotal =  $form.find('.cost-total');
	
		var $cost = $form.find('[name="cost"]');
		var $amount = $form.find('[name="amount"]');
		var $deliveryChCost = $form.find('[name="delivery_ch"]');
		var $weight = $form.find('[name="weight"]');
		var $currencyRate = $form.find('[name="currency_rate"]');
		var $deliveryRusCost = $form.find('[name="delivery_rus"]');
		var $commision = $form.find('[name="commission"]');
	var getFloatValue = function( $element ){
		var value = parseFloat( $element.val().replace(',','.').replace(' ','') );
		if( isNaN( value ) ){ value=0.00; }
		return value;
	}
	
	var calculation = function() 
	{
		var cost = getFloatValue( $cost );
		var amount = getFloatValue( $amount );
		var deliveryChCost = getFloatValue( $deliveryChCost );
		var weight = getFloatValue( $weight );
		var currencyRate = getFloatValue( $currencyRate );
		var deliveryRusCost = getFloatValue( $deliveryRusCost );
		var commision = getFloatValue( $commision );
		
		/*var resChina = ( cost * amount * currencyRate );
		var resDeliveryToRus = deliveryRusCost * weight * amount + deliveryChCost * currencyRate;
		var resTotal = ( resChina + resDeliveryToRus );
		resTotal += resTotal * commision / 100.00;*/
		
		/*
		Стоимость товара в Китае = Стоимость товара * Количество товара * Курс Юаня
		Стоимость доставки в Россию = Доставка в России * Примерный вес товара * Количество товара + Стоимость доставки по Китаю * Курс Юаня
		Итог общий = ( Стоимость товара в Китае + Стоимость доставки в Россию ) + ( Стоимость товара в Китае + Стоимость доставки в Россию ) * Комиссия за наши услуги  / 100

		$resChina.find('.price_result > span.bold_span').text(resChina.formatMoney(2,'.',' '));
		$resDeliveryToRus.find('.price_result > span.bold_span').text(resDeliveryToRus.formatMoney(2,'.',' '));
		$resTotal.find('.price_result > span.bold_span').text(resTotal.formatMoney(2,'.',' '));*/
		
		
		/*
		Итого = стоимость товара + Стоимость доставки в Новосибирск
		Стоимость товара = ((a*b)*c+d)*e
		A – цена товара (в юанях)
		B – кол-во (в шт)
		C – комиссия за наши услуги (если 10, то умножаем на 1,1) 
		D- доставка по Китаю ( в юанях)
		E – курс юаня

		Стоимость доставки в Новосибирск = Вес в кг*270
		*/

		var resChina = ( cost * amount * ( (100 + commision) / 100.00) + deliveryChCost ) * currencyRate;
		var resDeliveryToRus = deliveryRusCost * weight;
		var resTotal = resChina + resDeliveryToRus;
		
		
		var options = {
			delimiter: ' ',
			rounding: 2,
			toValue: resChina,
			duration: 350,
			easing: 'swing'
		};
		$resChina.find('.price_result > span.bold_span').numerator( options );
		/*$resChina.find('.price_result > span.bold_span').animateNumber(
			{ 
				number: resChina,
				numberStep: function(now, tween) {
				  $(tween.elem).text(now.formatMoney(2,'.',' '));
				}
		 	}
		 );*/
		 
		options.toValue = resDeliveryToRus;
		options.duration = 700;
		$resDeliveryToRus.find('.price_result > span.bold_span').numerator( options );
		
		options.toValue = resTotal;
		options.duration = 1000;
		$resTotal.find('.price_result > span.bold_span').numerator( options );
	}
		
	
	$calcButton.on(
		'click',
		function() {
			calculation();
			return false;
		}
	);
	
	var $captcha = $form.find('#captcha1');
	
	var sendAjaxForm = function( form ) {
		$error.html('').hide();
		$message.html('').hide();
		var data = {
			captcha_id:$captcha.attr('data-id'),
		}
		$(form).find('input,select,textarea').each(
			function() {
				data[$(this).attr('name')] = $(this).val();
			} 
		);
		$.post(
			$(form).attr('action'),
			data,
			function(data) {
				if(data.status == 'success') {
					$message.html(data.message).show();
					setTimeout(function() {
						$message.hide();
					}, 1500);
					$(form).get(0).reset();
				} else {
					if(!data.captcha){
						$captcha.addClass('error');
					}
				}
			}, 
			'json'
		);
	}
	
	if( typeof( $.fn.validate ) !== 'undefined' ) {

		$form.validate( { 
			errorPlacement: function(error, element) {},
			submitHandler: function(form) {
				//sendAjaxForm( $(form) );
				return false;
			}
		} );

	} else {
		$form.bind('submit', function(event) {
			event.preventDefault();
			//sendAjaxForm( $(form) );
		});
	}
});
</script>
				
            </div>
        </div>
    </div>

    <div class="benefits benefits_bottom">
    	<div>
        	<span class="benefit benefit1">быстрая доставка</span>
        	<span class="benefit benefit2">Полная финансовая ответственность</span>
            <span class="benefit benefit3">Индивидуальный подход</span>
        </div>
    </div>

    <div class="footer">
    	<div class="clear">
    	
						
						        	<div class="footer_nav">
                <h3>Помощь</h3>
                                	<ul class="" id="yw1">
<li class=""><a href="razdel1.html">Раздел1</a></li>
</ul>                 			</div>
 			        	<div class="footer_nav">
                <h3>О компании</h3>
                                	<ul class="" id="yw2">
<li class=""><a href="razdel2.html">Раздел2</a></li>
</ul>                 			</div>
 			        	<div class="footer_nav">
                <h3>Мой аккаунт</h3>
                                	<ul class="" id="yw3">
<li class=""><a href="razdel3.html">Раздел3</a></li>
</ul>                 			</div>
 			        	<div class="footer_nav">
                <h3>Новости</h3>
                                	<ul class="" id="yw4">
<li class=""><a href="razdel4.html">Раздел4</a></li>
</ul>                 			</div>
 			            <div class="footer_info">
            	<h3>Новости сайта</h3>
                <p>Если вы хотите быстро получать информацию о новых товарах и скидках, оформите подписку</p>
                <div class="subscription">
	                <form action="http://lovchina.ru/subscribe" method="get">
    	            	<input type="email" placeholder="Подписаться на новости">
    	                <input type="submit">
                    </form>
                </div>
                <div class="social">
                	                </div>
            </div>

        </div>
    </div>

    <div class="bottom">
    	<div class="clear">
        	<div class="copy">
            	<p>Copyright © 2016 - 2018 lovchina</p>
            </div>
            <div class="pay_system">
            	            </div>
            <div class="razrab">
            	<a target="blank" title="Создание сайтов в Новосибирске - AF" href="http://saytdarom.ru" class="razrab1">Создание сайта</a>
                <a target="blank" title="Продвижение сайтов. Контекстная реклама - AFUP" href="http://afup.ru" class="razrab2">Продвижение сайта</a>
            </div>
        </div>
    </div>

</div>


	<div id="bg_modal"></div>
	
	<div id="modal-wrap"></div>
	<div id="modal-msg">
		<a href="calculator.html#" class="close" title="Закрыть">&times;</a>
		<div class="content"></div>
	</div>
	
	<script type="text/javascript">
		var discounts = [];
		$(function(){ recalcDiscount(0) });
	</script>



	<meta name="yandex-verification" content="2524d614da36dadb" />	
		
<script type="text/javascript" src="themes/lovechina/assets/vendor/garethdn-jquery-numerator/jquery-numerator.js"></script>
<script type="text/javascript" src="js/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript" src="js/jquery.maskedinput.min.js"></script>
<script type="text/javascript" src="js/jquery-validation/dist/jquery.validate.min.js"></script>
<script type="text/javascript" src="assets/base.js"></script>
<script type="text/javascript" src="assets/function.js"></script>
<script type="text/javascript" src="themes/lovechina/assets/js/slick.min.js"></script>
<script type="text/javascript" src="themes/lovechina/assets/js/fancySelect.js"></script>
<script type="text/javascript" src="themes/lovechina/assets/js/script.js"></script>
<script type="text/javascript" src="themes/lovechina/assets/js/search_script.js"></script>
</body>
</html>
